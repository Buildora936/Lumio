<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Lumio â€“ Livres</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const app = initializeApp({
  apiKey: "AIzaSyD5uZ2jt01wJVCWfjdJ6IFa5fAVbdfoI_c",
  databaseURL: "https://lumio-6efed-default-rtdb.firebaseio.com"
});

const db = getDatabase(app);
const grid = document.getElementById("grid");

onValue(ref(db, "books"), snap => {
  grid.innerHTML = "";
  if (!snap.exists()) return;

  Object.entries(snap.val()).forEach(([id, b]) => {
    const card = document.createElement("div");
    card.className = "card";
    card.onclick = () => location.href = `book.html?id=${id}`;

    card.innerHTML = `
      <img src="${b.coverBase64}">
      <h3>${b.title}</h3>
      <p>${b.authorName}</p>
      <span>$${b.price}</span>
    `;
    grid.appendChild(card);
  });
});
</script>

<style>
body{margin:0;background:#181818;color:white;font-family:system-ui}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:16px;
  padding:16px;
}
.card{
  background:#202020;
  border-radius:12px;
  padding:10px;
  cursor:pointer;
}
.card img{
  width:100%;
  border-radius:8px;
}
span{color:#ff7f50;font-weight:600}
</style>
</head>

<body>
<h2 style="padding:16px">ðŸ“š Livres Lumio</h2>
<div class="grid" id="grid"></div>
</body>
</html>
